!function(m,n,l,e){"use strict";var p,a="ShopLocator",i={pluginStyle:"lollipop",paginationStyle:1,preloader:!1,json:null,map:{center:[52.229676,21.012229],MapType:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!1,mapStyle:[],draggable:!0,disableDoubleClickZoom:!1,maxZoom:"",minZoom:"",scrollwheel:!0,zoom:10,allMarkersInViewport:!0},infoBubble:{visible:!1,padding:0,borderRadius:4,borderWidth:0,borderColor:"#fff",backgroundColor:"#fff",shadowStyle:0,minHeight:null,maxHeight:100,minWidth:200,maxWidth:null,arrowStyle:0,arrowSize:10,arrowPosition:50,hideCloseButton:!1,closeSrc:"src/style/closeButton.svg",offsetTop:2,offsetRight:2,disableAutoPan:!1,getDirectionsButton:!0,getDirectionsButtonName:"Get Directions",directionsUseGeolocation:!0},markersIcon:"",marker:{latlng:[52.229676,21.012229],animation:!1,title:"CreateIT",street:"",zip:"",city:""},cluster:{enable:!1,clusterClass:"cluster",gridSize:50,maxZoom:11,style:{anchorIcon:[0,0],anchorText:[0,0],backgroundPosition:"0 0",fontFamily:"Arial,sans-serif",fontStyle:"normal",textColor:"white",fontWeight:"bold",textSize:18,heightSM:60,widthSM:54,heightMD:60,widthMD:54,heightBIG:60,widthBIG:54,iconSmall:"",iconMedium:"",iconBig:""}},sidebar:{visible:!1,units:"km",selectSection:{visible:!1,pathToJSONDirectory:"src/json/",difFiles:[["First Region","markers"],["Second Region","diffmarkers"]],fileTypes:"json"},searchBox:{visible:!1,findPlaceBy:["(regions)"],searchByCountry:[!0,"us"],search:!1,searchRadius:20},results:{visibleInFirstPage:!0,pageSize:10,currentPage:1,paginationItems:5,sort:"ascending"}}};function t(e,t){this.element=e,this.settings=m.extend(!0,{},i,t),this._defaults=i,this._name=a,this.init()}m.extend(t.prototype,{init:function(){var e=this;m.getScript("src/dependences/markerclusterer.js").done(function(){m.getScript("src/dependences/infobubble.js").done(function(){e.setUpScriptBody(e.element,e.settings),e.setUpMap(e.element,e.settings)})})},setUpScriptBody:function(e,t){var a;m(e).addClass(t.pluginStyle),1==t.sidebar.visible?(e.innerHTML="<div class='row'><div class='ct-googleMap--SidebarCol'><div class='ct-googleMap--sidebar'></div></div><div class='ct-googleMap--MapCol'><div class='ct-googleMap ct-js-googleMap' id='map_canvas'></div></div></div>",a=m(e).find(".ct-googleMap--sidebar"),1==t.sidebar.selectSection.visible&&(a.append("<div class='ct-googleMap--selectContainer'><select class='ct-googleMap--select'></select></div>"),this.createSelectSection(e,t)),1!=t.sidebar.searchBox.visible&&1!=t.sidebar.searchBox.search||(a.append("<div class='ct-googleMap--searchContainer'><input type='text' class='ct-googleMap--search' id='searchGmaps' placeholder='Code or city'></div>"),1==t.sidebar.searchBox.search?a.append("<div class='ct-googleMap--resultsCounter'></div><div class='ct-googleMap--results'></div>"):1==t.sidebar.results.visibleInFirstPage&&a.append("<div class='ct-googleMap--results'></div>")),1==t.preloader&&m(e).append("<div class='ct-preloader'><div class='ct-preloaderCenter'><div class='ct-preloader-content'><span></span><span></span><span></span><span></span><span></span></div></div> </div>")):e.innerHTML="<div class='ct-googleMap ct-js-googleMap' id='map_canvas'></div>"},setUpMap:function(e,t){var a,i,o,s=m(e).find(".ct-js-googleMap");o=!(n.screen.width<998)&&t.map.draggable,a=new google.maps.Map(s[0],{center:new google.maps.LatLng(t.map.center[0],t.map.center[1]),mapTypeId:t.map.MapType,styles:t.map.mapStyle,disableDefaultUI:t.map.disableDefaultUI,draggable:o,disableDoubleClickZoom:t.map.disableDoubleClickZoom,maxZoom:t.map.maxZoom,minZoom:t.map.minZoom,scrollwheel:t.map.scrollwheel,zoom:t.map.zoom}),1==t.infoBubble.visible&&new google.maps.InfoWindow,i=new google.maps.LatLngBounds,this.displayMarkers(this,e,a,i,t)},JSonMainFunction:function(e,t,a,i,o,s,n,l){var r,c,d,g,p=[];0!==l.cluster.style.iconSmall.length&&0!==l.cluster.style.iconMedium&&0!==l.cluster.style.iconBig&&(p=[{anchorIcon:l.cluster.style.anchorIcon,anchorText:l.cluster.style.anchorText,backgroundPosition:l.cluster.style.backgroundPosition,fontFamily:l.cluster.style.fontFamily,fontStyle:l.cluster.style.fontStyle,textColor:l.cluster.style.textColor,fontWeight:l.cluster.style.fontWeight,textSize:l.cluster.style.textSize,url:l.cluster.style.iconSmall,height:l.cluster.style.heightSM,width:l.cluster.style.widthSM},{anchorIcon:l.cluster.style.anchorIcon,anchorText:l.cluster.style.anchorText,backgroundPosition:l.cluster.style.backgroundPosition,fontFamily:l.cluster.style.fontFamily,fontStyle:l.cluster.style.fontStyle,textColor:l.cluster.style.textColor,fontWeight:l.cluster.style.fontWeight,textSize:l.cluster.style.textSize,url:l.cluster.style.iconMedium,height:l.cluster.style.heightMD,width:l.cluster.style.widthMD},{anchorIcon:l.cluster.style.anchorIcon,anchorText:l.cluster.style.anchorText,backgroundPosition:l.cluster.style.backgroundPosition,fontFamily:l.cluster.style.fontFamily,fontStyle:l.cluster.style.fontStyle,textColor:l.cluster.style.textColor,fontWeight:l.cluster.style.fontWeight,textSize:l.cluster.style.textSize,url:l.cluster.style.iconBig,height:l.cluster.style.heightBIG,width:l.cluster.style.widthBIG}]),g={clusterClass:l.cluster.clusterClass,gridSize:l.cluster.gridSize,maxZoom:l.cluster.maxZoom,styles:p},m(o).find(".ct-googleMap--search").val(""),i=[],r=a,"ascending"===l.sidebar.results.sort&&r.sort(function(e,t){var a=e.title,i=t.title;return a==i?0:i<a?1:-1}),"descending"===l.sidebar.results.sort&&r.sort(function(e,t){var a=e.title,i=t.title;return a==i?0:a<i?1:-1}),n=new google.maps.LatLngBounds(null);for(var u=0;r.length>u;u++)c=e.createMarkers(s,t,r[u],l),n.extend(c.position),i.push(c),1==l.sidebar.visible&&1==l.sidebar.results.visibleInFirstPage&&e.createSidebarButtons(s,c,o,l);return e.resultsInPage(e,o,l),1==l.cluster.enable&&(!0,d=new MarkerClusterer(s,i,g)),1==l.map.allMarkersInViewport&&s.fitBounds(n),1!=l.sidebar.searchBox.visible&&1!=l.sidebar.searchBox.search||e.searchPlace(e,t,s,i,o,l),d},displayMarkers:function(t,a,i,o,s){var e,n,l,r,c,d,g,p=[];if(e=m(a).find(".ct-googleMap--select"),1==s.preloader)var u=m(a).find(".ct-preloader");if(1==s.sidebar.searchBox.visible||1==s.sidebar.searchBox.search){g=1==s.sidebar.searchBox.searchByCountry[0]?{types:s.sidebar.searchBox.findPlaceBy,componentRestrictions:{country:s.sidebar.searchBox.searchByCountry[1]}}:{types:s.sidebar.searchBox.findPlaceBy};var h=m(a).find(".ct-googleMap--search");d=new google.maps.places.Autocomplete(h[0],g)}if(1==s.sidebar.selectSection.visible&&1==s.sidebar.visible)m(e).change(function(){m(this).find("option:selected").each(function(){m(a).find(".ct-googleMap--sidebarItem").remove(),n=e.val(),m(a).find(".ct-googleMap--resultsCounter").html(""),1==s.preloader&&u.removeClass("make-hidden"),m.ajax({url:s.sidebar.selectSection.pathToJSONDirectory+n+"."+s.sidebar.selectSection.fileTypes,dataType:"json",success:function(e){1==c&&(r.clearMarkers(),c=!1),r=t.JSonMainFunction(t,d,e,p,a,i,o,s),c=!0,1==s.preloader&&u.addClass("make-hidden")},error:function(e,t,a){console.log("ERROR",t,a)}})})}).trigger("change");else if(null==s.json){var b=[{lat:s.marker.latlng[0],lng:s.marker.latlng[1],title:s.marker.title,street:s.marker.street,city:s.marker.city,zip:s.marker.zip}];l=t.createMarkers(i,d,b[0],s),p.push(l),1==s.map.allMarkersInViewport&&(o.extend(l.position),i.fitBounds(o)),(1==s.sidebar.visible&&1==s.sidebar.searchBox.visible||1==s.sidebar.searchBox.search)&&t.searchPlace(t,d,i,p,a,s)}else m.ajax({url:s.json,dataType:"json",success:function(e){1==c&&(r.clearMarkers(),c=!1),r=t.JSonMainFunction(t,d,e,p,a,i,o,s),c=!0,1==s.preloader&&u.addClass("make-hidden")},error:function(e,t,a){console.log("ERROR",t,a)}})},createMarkers:function(e,t,a,i){var o="",s=new google.maps.Marker({position:new google.maps.LatLng(a.lat,a.lng),animation:i.marker.animation,map:e,title:a.title,icon:a.icon});0!=i.markersIcon.length&&s.setIcon(i.markersIcon);var n=s.getPosition();if(1==i.infoBubble.getDirectionsButton&&(o="<a class='ct-button--direction make-hidden' href='' target='_blank'>"+i.infoBubble.getDirectionsButtonName+"</a>"),1==i.infoBubble.visible){var l=new InfoBubble({visible:i.infoBubble.visible,content:"<div class = 'ct-googleMap--InfoWindowBody' style='text-align: center;'><span>"+a.title+"</span><span>"+a.street+"</span><span>"+a.zip+" - "+a.city+"</span>"+o+"</div>",backgroundClassName:"ct-googleMap--customInfoWindow",padding:i.infoBubble.padding,borderRadius:i.infoBubble.borderRadius,borderWidth:i.infoBubble.borderWidth,borderColor:i.infoBubble.borderColor,backgroundColor:i.infoBubble.backgroundColor,shadowStyle:i.infoBubble.shadowStyle,minHeight:i.infoBubble.minHeight,maxHeight:i.infoBubble.maxHeight,minWidth:i.infoBubble.minWidth,maxWidth:i.infoBubble.maxWidth,arrowStyle:i.infoBubble.arrowStyle,arrowSize:i.infoBubble.arrowSize,arrowPosition:i.infoBubble.arrowPosition,hideCloseButton:i.infoBubble.hideCloseButton,closeSrc:i.infoBubble.closeSrc,offsetTop:i.infoBubble.offsetTop,offsetRight:i.infoBubble.offsetRight,disableAutoPan:i.infoBubble.disableAutoPan});if(google.maps.event.addListener(s,"click",function(){p&&p.close(),l.open(e,s),p=l}),1==i.infoBubble.getDirectionsButton){if(0==i.infoBubble.directionsUseGeolocation&&1==i.sidebar.searchBox.visible&&1==i.sidebar.visible){var r,c,d,g=!1;google.maps.event.addListener(t,"places_changed",function(){r=t.getPlace(),c=r.geometry.location.lat(),d=r.geometry.location.lng(),g=!0})}google.maps.event.addListener(l,"domready",function(){var t=m("a.ct-button--direction");1==i.infoBubble.directionsUseGeolocation||0==i.sidebar.visible?(t.removeClass("make-hidden"),navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){t.each(function(){m(this).attr("href",""),m(this).attr("href","http://maps.google.com/maps?saddr="+e.coords.latitude+","+e.coords.longitude+",&daddr="+n.lat()+","+n.lng())})},function(){console.log("Error: The Geolocation service failed.")}):console.log("Error: Your browser doesn't support geolocation.")):(t.each(function(){m(this).attr("href",""),m(this).attr("href","http://maps.google.com/maps?saddr="+c+","+d+",&daddr="+n.lat()+","+n.lng())}),1==g&&t.removeClass("make-hidden"))})}}return google.maps.event.addDomListener(s,"click",function(){e.setCenter(n)}),s},createSidebarButtons:function(e,t,a,i){var o=m(a).find(".ct-googleMap--results"),s=l.createElement("div");s.className="ct-googleMap--sidebarItem",google.maps.event.clearListeners(s,"click"),s.innerHTML="<span class='ct-googleMap--sidebarItemTitle'>"+t.getTitle()+"</span>",o.append(s),google.maps.event.addDomListener(s,"click",function(){google.maps.event.trigger(t,"click"),e.setZoom(12),e.setCenter(t.getPosition())})},searchPlace:function(o,s,n,l,r,c){google.maps.event.addListener(s,"place_changed",function(){var a,e=s.getPlace();if(e.geometry)a=new google.maps.LatLng(e.geometry.location.lat(),e.geometry.location.lng()),1==c.sidebar.searchBox.search&&o.displaySearchResults(o,n,l,a,r,c),n.setCenter(e.geometry.location);else{var t=new google.maps.Geocoder,i=e.name;t.geocode({address:i+","+c.sidebar.searchBox.searchByCountry[1]},function(e,t){t===google.maps.GeocoderStatus.OK?(n.setCenter(e[0].geometry.location),a=new google.maps.LatLng(e[0].geometry.location[0],e[0].geometry.location[1]),1==c.sidebar.searchBox.search&&o.displaySearchResults(o,n,l,a,r,c)):alert("Geocode was not successful for the following reason: "+t)})}0!=e.length&&n.setZoom(11)})},displaySearchResults:function(e,t,a,i,o,s){var n,l,r=[],c=m(o).find(".ct-googleMap--resultsCounter");"km"==s.sidebar.units?(n=1e3,l="km"):(n=1609,l="mile"),m(o).find(".ct-googleMap--sidebarItem").remove();for(var d=0;a.length>d;d++){var g=a[d].getPosition().lat(),p=a[d].getPosition().lng(),u=new google.maps.LatLng(g,p),h=google.maps.geometry.spherical.computeDistanceBetween(i,u)/n;h<s.sidebar.searchBox.searchRadius&&(a[d].distance=h.toFixed(2),r.push(a[d]))}r.sort(function(e,t){return parseFloat(e.distance,10)-parseFloat(t.distance,10)});for(var b=0;r.length>b;b++)e.createSidebarButtons(t,r[b],o,s),m(o).find(".ct-googleMap--sidebarItem:nth-child("+(b+1)+")").append("<span class='ct-googleMap--sidebarItemDistance'>"+r[b].distance+" "+l+"</span>");c.html(""),c.append("Items<span class='ct-googleMap--itemCounter'>"+r.length+"</span>"),e.resultsInPage(e,o,s)},resultsInPage:function(e,t,a){var i=a.sidebar.results.pageSize,o=a.sidebar.results.currentPage,s=1,n=m(t).find(".ct-googleMap--results"),l="<ul class='Navigation'>",r="<li class='paginationCounter'>";if(e.sidebarClear(s,t),1!=a.paginationStyle?r+="</li>":r+="<a rel='1' class='NavPage'>1</a>",n.children().each(function(e){e<s*i&&(s-1)*i<=e?m(this).addClass("page"+s):(m(this).addClass("page"+(s+1)),1==a.paginationStyle&&(r+="<a rel='"+(s+1)+"' class='NavPage'>"+(s+1)+"</a>"),s++)}),1==a.paginationStyle&&(r+="</li>"),n.children().hide(),n.children(".page"+o).show(),!(s<=1)){l+="<li class='NavigationPrev NavigationDisable Navigation1'><a rel='1'></a></li>",l+=r,l+="<li class='NavigationNext Navigation2'><a rel='2' ></a></li>",l+="</ul>",m(t).find(".ct-googleMap--sidebar").append(l),e.pagination(e,n,s,i,o,t,a)}},pagination:function(e,t,a,i,o,s,n){var l,r=1,c=1,d=1,g=m(s).find(".paginationCounter"),p=m(s).find(".NavigationPrev"),u=m(s).find(".NavigationNext");2==n.paginationStyle&&e.counterElements(t,g,a,i,o,s),1==n.paginationStyle&&(g.children().each(function(e){e<d*n.sidebar.results.paginationItems&&e>=(d-1)*n.sidebar.results.paginationItems?m(this).addClass("paginationPage"+d):(m(this).addClass("paginationPage"+(d+1)),d+=1)}),g.children().hide(),g.children(".paginationPage"+o).show(),m(s).find(".NavPage[rel='"+o+"']").addClass("active"),m(s).find(".NavPage").on("click",function(){var e=m(this).attr("rel");m(this).addClass("active").siblings().removeClass("active"),l=!0,e<r?(r=e,p.trigger("click")):(r=e,u.trigger("click"))})),m(s).find(".NavigationPrev").on("click",function(){1==l?(t.children().hide(),t.find(".page"+r).show(),1==r&&m(this).addClass("NavigationDisable"),u.removeClass("NavigationDisable"),l=!1):(1==r?r=1:(2==r&&m(this).addClass("NavigationDisable"),u.removeClass("NavigationDisable"),r-=1),t.children().hide(),t.find(".page"+r).show(),1!=n.paginationStyle?(g.children().hide(),g.children(".paginationCount"+r).show()):(r<c*n.sidebar.results.paginationItems&&r==(c-1)*n.sidebar.results.paginationItems?c-=1:r<c*n.sidebar.results.paginationItems&&r>=(c-1)*n.sidebar.results.paginationItems||(c-=1),g.children().hide(),g.children(".paginationPage"+c).show(),m(s).find(".NavPage[rel='"+r+"']").addClass("active").siblings().removeClass("active")))}),m(s).find(".NavigationNext").on("click",function(){1==l?(t.children().hide(),t.find(".page"+r).show(),r==a&&m(this).addClass("NavigationDisable"),p.removeClass("NavigationDisable"),l=!1):(r==a?r=a:(r==a-1&&m(this).addClass("NavigationDisable"),p.removeClass("NavigationDisable"),r=parseInt(r,10)+1),t.children().hide(),t.find(".page"+r).show(),1!=n.paginationStyle?(g.children().hide(),g.children(".paginationCount"+r).show()):(r<c*n.sidebar.results.paginationItems&&r>=(c-1)*n.sidebar.results.paginationItems||r==c*n.sidebar.results.paginationItems||c++,g.children().hide(),g.children(".paginationPage"+c).show(),m(s).find(".NavPage[rel='"+r+"']").addClass("active").siblings().removeClass("active")))})},counterElements:function(e,t,a,i,o,s){for(var n=[],l=0;l<a;l++)n.push(m(s).find(".page"+(1+l)).length),1<n[l]?t.append("<span class='paginationCount"+(l+1)+"'>"+(1+l*i)+" - "+(n[l]+l*i)+" of "+e.children().length+"</span>"):t.append("<span class='paginationCount"+(l+1)+"'>"+(n[l]+l*i)+" of "+e.children().length+"</span>");t.children().hide(),m(s).find(".paginationCount"+o).show()},createSelectSection:function(e,t){for(var a=t.sidebar.selectSection.difFiles,i=m(e).find(".ct-googleMap--select"),o=0;a.length>o;o++)i.append("<option value='"+a[o][1]+"'>"+a[o][0]+"</option>")},sidebarClear:function(e,t){m(t).find(".Navigation").remove()}}),m.fn[a]=function(e){return this.each(function(){m.data(this,"plugin_"+a)||m.data(this,"plugin_"+a,new t(this,e))})}}(jQuery,window,document);